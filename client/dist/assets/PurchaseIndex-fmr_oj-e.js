import{r as u,j as e,G as a,d as g,c as W,T as b,w as X,S as Z}from"./index-BFgOO9FV.js";import{a as q}from"./axios-CMf68hJO.js";import{T as p,S as ee}from"./TextField-uMyB6taY.js";import{T as w,a as F,b as O,c as R,d as n,e as G,S as te}from"./Search-BptgNfeq.js";import{l as se}from"./logo (1)-D-rUVK23.js";import{h as A}from"./moment-G82_0lEo.js";import{F as re}from"./OutlinedInput-CU74RVD_.js";import{M as v}from"./MenuItem-DdWCPvaA.js";import{P as ie}from"./Pagination-Jcemn9fm.js";import{D as T,a as k,b as S}from"./DialogContent-BR2G1wlf.js";const ne=({onClose:s})=>{const[o,h]=u.useState({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),[c,i]=u.useState({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),C=(y,d)=>{let t="";const r=d&&typeof d=="string"?d.trim():d;switch(y){case"pro_name":r||(t="Product Name is Required");break;case"specification":r||(t="Specification is Required");break;case"purch_address":r||(t="Address is Required");break;case"quantity":r||(t="Quantity is Required");break;case"price":r||(t="Price is Required");break;case"total":r||(t="Total is Required");break;case"gst":r||(t="GST is Required");break}return t},j=y=>{const{name:d,value:t}=y.target,r=C(d,t);h({...o,[d]:t}),i({...c,[d]:r})},m=y=>{y.preventDefault();let d={};if(Object.keys(o).forEach(t=>{const r=o[t],x=C(t,r);x&&(d[t]=x)}),Object.keys(d).length>0){i(d);return}q.post(`${W.apiUrl}/purchase/savePurchase`,o).then(t=>{s()}).catch(t=>{console.log("Purchase Data is not added.",t)})},P=()=>{h({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),i({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Add Purchase"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"pro_name",label:"Product Name",value:o.pro_name,onChange:j,error:!!c.pro_name,helperText:c.pro_name})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"specification",label:"Specification",value:o.specification,onChange:j,error:!!c.specification,helperText:c.specification})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"purch_address",label:"Address",value:o.purch_address,onChange:j,error:!!c.purch_address,helperText:c.purch_address})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"quantity",label:"Quantity",type:"number",value:o.quantity,onChange:j,error:!!c.quantity,helperText:c.quantity})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"price",label:"Price",type:"number",value:o.price,onChange:j,error:!!c.price,helperText:c.price})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"total",label:"Total",type:"number",value:o.total,onChange:j,error:!!c.total,helperText:c.total})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"gst",label:"GST",type:"number",value:o.gst,onChange:j,error:!!c.gst,helperText:c.gst})}),e.jsxs(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(g,{onClick:m,children:"Submit"}),e.jsx(g,{onClick:P,style:{marginLeft:"20px"},children:"Clear"})]})]})]})},ae=({data:s,onClose:o})=>{const[h,c]=u.useState({pro_name:s?s.pro_name:"",specification:s?s.specification:"",purch_address:s?s.purch_address:"",quantity:s?s.quantity:"",price:s?s.price:"",total:s?s.total:"",gst:s?s.gst:""}),[i,C]=u.useState({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),j=(d,t)=>{let r="";const x=t&&typeof t=="string"?t.trim():t;switch(d){case"pro_name":x||(r="Product Name is Required");break;case"specification":x||(r="Specification is Required");break;case"purch_address":x||(r="Address is Required");break;case"quantity":x||(r="Quantity is Required");break;case"price":x||(r="Price is Required");break;case"total":x||(r="Total is Required");break;case"gst":x||(r="GST is Required");break}return r},m=d=>{const{name:t,value:r}=d.target,x=j(t,r);c({...h,[t]:r}),C({...i,[t]:x})},P=d=>{d.preventDefault();let t={};if(Object.keys(h).forEach(r=>{const x=h[r],D=j(r,x);D&&(t[r]=D)}),Object.keys(t).length>0){C(t);return}q.put(`${W.apiUrl}/purchase/update/${s.purch_id}`,h).then(r=>{o()}).catch(r=>{console.log("Purchase Data is not added.",r)})},y=()=>{c({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),C({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Add Purchase"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"pro_name",label:"Product Name",value:h.pro_name,onChange:m,error:!!i.pro_name,helperText:i.pro_name})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"specification",label:"Specification",value:h.specification,onChange:m,error:!!i.specification,helperText:i.specification})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"purch_address",label:"Address",value:h.purch_address,onChange:m,error:!!i.purch_address,helperText:i.purch_address})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"quantity",label:"Quantity",type:"number",value:h.quantity,onChange:m,error:!!i.quantity,helperText:i.quantity})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"price",label:"Price",type:"number",value:h.price,onChange:m,error:!!i.price,helperText:i.price})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"total",label:"Total",type:"number",value:h.total,onChange:m,error:!!i.total,helperText:i.total})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(p,{fullWidth:!0,name:"gst",label:"GST",type:"number",value:h.gst,onChange:m,error:!!i.gst,helperText:i.gst})}),e.jsxs(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(g,{onClick:P,children:"Update"}),e.jsx(g,{onClick:y,style:{marginLeft:"20px"},children:"Clear"})]})]})]})},le=({data:s,dueDate:o})=>e.jsxs("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[e.jsx(b,{variant:"h4",align:"center",style:{marginBottom:"20px"},children:"Invoice"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,display:"flex",justifyContent:"end",children:e.jsx("img",{src:se,alt:"Company Logo",width:"100",height:"100"})}),e.jsxs(a,{item:!0,xs:4,children:[e.jsx(b,{variant:"h6",style:{fontWeight:"bold"},children:"From"}),e.jsx(b,{children:s.purch_address})]}),e.jsxs(a,{item:!0,xs:4,children:[e.jsx(b,{variant:"h6",style:{fontWeight:"bold"},children:"To"}),e.jsx(b,{children:"Krishna Industries"}),e.jsx(b,{children:"Peelamedu, Singanallur"}),e.jsx(b,{children:"Coimbatore, 627757"})]}),e.jsxs(a,{item:!0,xs:4,children:[e.jsxs(b,{variant:"h6",style:{display:"inline-block",marginRight:"20px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Invoice Date    : "})," ",A().format("YYYY-MM-DD")]}),e.jsxs(b,{variant:"h6",style:{display:"inline-block",marginTop:"2px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Due Date           :"})," ",A(o).format("YYYY-MM-DD")]})]})]}),e.jsx(w,{style:{marginTop:"20px"},children:e.jsxs(F,{children:[e.jsx(O,{children:e.jsxs(R,{children:[e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"S.No"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Product Name"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Description"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Quantity"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Price"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Total"})]})}),e.jsx(G,{children:e.jsxs(R,{children:[e.jsx(n,{style:{border:"1px solid #ddd"},children:"01"}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.pro_name}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.specification}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.quantity}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.price}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.total})]})})]})}),e.jsxs("div",{style:{marginTop:"20px",borderTop:"1px solid #ddd",textAlign:"right"},children:[e.jsxs(b,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"Price"})," : ",s.price]}),e.jsxs(b,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"GST 18%"})," : ",s.gst]}),e.jsxs(b,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"Total"})," : ",s.total]})]})]}),ce=({data:s})=>{const[o,h]=u.useState(null),c=()=>{const i=document.getElementById("printButton");i&&(i.style.display="none"),window.print(),i&&(i.style.display="block")};return e.jsx(e.Fragment,{children:o?e.jsxs(e.Fragment,{children:[e.jsx(le,{data:s,dueDate:o}),e.jsx(g,{id:"printButton",onClick:c,style:{display:"block",margin:"20px auto"},children:"Print"})]}):e.jsx(p,{label:"Due Date",type:"date",InputLabelProps:{shrink:!0},onChange:i=>h(i.target.value),value:o})})},ye=()=>{const[s,o]=u.useState([]),[h,c]=u.useState([]),[i,C]=u.useState(5),[j,m]=u.useState(1),[P,y]=u.useState(!1),[d,t]=u.useState(!1),[r,x]=u.useState(),[D,_]=u.useState(!1),[E,U]=u.useState(),[Y,I]=u.useState(!1),[B,M]=u.useState([]);u.useEffect(()=>{q.get(`${W.apiUrl}/purchase/getPurchase`).then(l=>{o(l.data),c(l.data)}).catch(l=>{console.log("Purchase Data could not be fetched.",l)})},[P,d,D]);const Q=l=>{const f=parseInt(l.target.value,10);f==1?(C(s.length),m(1)):(C(f),m(1))},$=(j-1)*i,L=j*i,V=h.slice($,L),z=l=>{const f=s.find(N=>N.purch_id===l);f&&(x(f),t(!0))},H=l=>{const f=s.find(N=>N.purch_id===l);f&&(M(f),I(!0))},K=l=>{l&&(U(l),_(!0))},J=()=>{E&&q.delete(`${W.apiUrl}/purchase/delete/${E}`).then(l=>{_(!1)}).catch(l=>{console.log("Purchase Data is not deleted.",l)})};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Purchase Index"}),e.jsxs(a,{container:!0,spacing:3,className:"mt-3",children:[e.jsx(a,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(g,{onClick:()=>y(!0),children:"Add New"})}),e.jsx(a,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(te,{data:s,setData:c})}),e.jsx(a,{item:!0,xs:4,display:"flex",justifyContent:"center",children:e.jsx(re,{children:e.jsxs(ee,{value:i,onChange:Q,children:[e.jsx(v,{value:5,children:"5 Per Page"}),e.jsx(v,{value:10,children:"10 Per Page"}),e.jsx(v,{value:15,children:"15 Per Page"}),e.jsx(v,{value:1,children:"All Per Page"})]})})})]}),e.jsx(w,{component:X,className:"mt-3",children:e.jsxs(F,{children:[e.jsxs(O,{children:[e.jsx(n,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Specification"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Quantity"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Price"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Total"}),e.jsx(n,{style:{fontWeight:"bold"},children:"GST"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Action"})]}),e.jsx(G,{children:V.map((l,f)=>e.jsxs(R,{children:[e.jsx(n,{children:f+1}),e.jsx(n,{children:l.pro_name}),e.jsx(n,{children:l.specification}),e.jsx(n,{children:l.purch_address}),e.jsx(n,{children:l.quantity}),e.jsx(n,{children:l.price}),e.jsx(n,{children:l.total}),e.jsx(n,{children:l.gst}),e.jsxs(n,{children:[e.jsx(g,{onClick:()=>H(l.purch_id),children:"Invoice"}),e.jsx(g,{onClick:()=>z(l.purch_id),children:"Edit"}),e.jsx(g,{onClick:()=>K(l.purch_id),children:"Delete"})]})]},f))})]})}),e.jsx(a,{container:!0,spacing:2,children:e.jsx(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(Z,{spacing:2,children:e.jsx(ie,{count:Math.ceil(s.length/i),page:j,onChange:(l,f)=>m(f),size:"small"})})})}),e.jsxs(T,{open:P,onClose:()=>y(!1),maxWidth:"md",children:[e.jsx(k,{children:e.jsx(ne,{onClose:()=>y(!1)})}),e.jsx(S,{children:e.jsx(g,{onClick:()=>y(!1),children:"Close"})})]}),e.jsxs(T,{open:d,onClose:()=>t(!1),maxWidth:"md",children:[e.jsx(k,{children:e.jsx(ae,{data:r,onClose:()=>t(!1)})}),e.jsx(S,{children:e.jsx(g,{onClick:()=>t(!1),children:"Close"})})]}),e.jsxs(T,{open:Y,onClose:()=>I(!1),maxWidth:"md",children:[e.jsx(k,{children:e.jsx(ce,{data:B,onClose:()=>I(!1)})}),e.jsx(S,{className:"mt-5"})]}),e.jsxs(T,{open:D,onClose:()=>_(!1),children:[e.jsx(k,{children:e.jsx("p",{children:"Are you sure do you want to delete this purchase data ?"})}),e.jsxs(S,{children:[e.jsx(g,{onClick:J,style:{backgroundColor:"red",color:"whitesmoke"},children:"Delete"}),e.jsx(g,{onClick:()=>_(!1),style:{backgroundColor:"green",color:"whitesmoke"},children:"Cancel"})]})]})]})};export{ye as default};
