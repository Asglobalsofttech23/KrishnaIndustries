import{r as d,j as e,G as l,d as f,c as S,B as ie,w as oe,S as ce}from"./index-BFgOO9FV.js";import{a as L}from"./axios-CMf68hJO.js";import{S as he,T as me,a as ue,b as xe,c as B,d as a,e as je}from"./Search-BptgNfeq.js";import{h as k}from"./moment-G82_0lEo.js";import{T as o,S as pe}from"./TextField-uMyB6taY.js";import{M as x}from"./MenuItem-DdWCPvaA.js";import{C as fe}from"./ConvertCustomer-BEVl0711.js";import{T as ge,a as M}from"./Tabs-RtGtfztt.js";import{F as ye}from"./OutlinedInput-CU74RVD_.js";import{P as be}from"./Pagination-Jcemn9fm.js";import{D as O,a as V,b as Q}from"./DialogContent-BR2G1wlf.js";const _e=({onClose:g,data:s})=>{const[r,y]=d.useState({leads_name:s?s.leads_name:"",leads_mobile:s?s.leads_mobile:"",leads_email:s?s.leads_email:"",leads_company:s?s.leads_company:"",leads_address:s?s.leads_address:"",leads_state:s?s.leads_state:"",leads_city:s?s.leads_city:"",product_name:s?s.product_name:"",leads_query:s?s.leads_query:"",remember:s?s.remember:"",reminder_date:s?s.reminder_date:""}),[m,_]=d.useState({leads_query:"",remember:"",reminder_date:""}),b=(j,h)=>{let i="";const u=h&&typeof h=="string"?h.trim():h;switch(j){case"leads_query":u||(i="Leads Query Message is Required");break;case"remember":u?u==="yes"&&!r.reminder_date&&(i="Reminder Date is Required"):i="Please Select one";break}return i},c=j=>{const{name:h,value:i}=j.target,u=b(h,i);y({...r,[h]:i}),_({...m,[h]:u})},Y=j=>{j.preventDefault();let h={};Object.keys(r).forEach(i=>{const u=r[i],C=b(i,u);C&&(h[i]=C)}),Object.keys(h).length>0&&_(h),L.put(`${S.apiUrl}/leads/updateFlwLeadForEmp/${s.follow_id}`,r).then(i=>{console.log("Data Added Successfully.",i),g()}).catch(i=>{console.log("Data is not added",i)})};return e.jsx("div",{children:e.jsxs(l,{container:!0,spacing:3,children:[e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_name",label:"Lead Name",value:r.leads_name,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_mobile",label:"Lead Mobile",value:r.leads_mobile,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_email",label:"Lead Email",value:r.leads_email,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_company",label:"Lead Company",value:r.leads_company,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_address",label:"Lead Address",value:r.leads_address,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_state",label:"Lead State",value:r.leads_state,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_city",label:"Lead City",value:r.leads_city,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"product_name",label:"Product Name",value:r.product_name,onChange:c})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"leads_query",label:"Leads Query",value:r.leads_query,onChange:c,error:!!m.leads_query,helperText:m.leads_query})}),e.jsx(l,{item:!0,xs:6,children:e.jsxs(o,{fullWidth:!0,select:!0,name:"remember",label:"Remember",value:r.remember,onChange:c,error:!!m.remember,helperText:m.remember,children:[e.jsx(x,{value:"Yes",children:"Yes"}),e.jsx(x,{value:"No",children:"No"})]})}),r.remember==="Yes"&&e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,name:"reminder_date",label:"Reminder Date",type:"date",value:r.reminder_date,onChange:c,error:!!m.reminder_date,helperText:m.reminder_date,InputLabelProps:{shrink:!0}})}),e.jsx(l,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(f,{onClick:Y,children:"Update"})})]})})},Ee=()=>{const[g,s]=d.useState([]),[r,y]=d.useState([]),[m,_]=d.useState(5),[b,c]=d.useState(1),[Y,j]=d.useState([]),[h,i]=d.useState([]),[u,C]=d.useState(k().format("YYYY-MM-DD")),[U,R]=d.useState(""),[q,N]=d.useState(""),[E,$]=d.useState(""),[T,A]=d.useState(""),P=sessionStorage.getItem("emp_id"),[D,G]=d.useState(1),[I,W]=d.useState(!1),[z,H]=d.useState([]),[J,w]=d.useState(!1),[K,X]=d.useState([]);d.useEffect(()=>{L.get(`${S.apiUrl}/leads/followingLeadsByEmpId?emp_id=${P}`).then(t=>{const n=new Set(t.data.map(v=>v.leads_state));j([...n]);const p=new Set(t.data.map(v=>v.leads_city));i([...p])}).catch(t=>{console.log("Leads data is not fetched.",t)})},[I]),d.useEffect(()=>{D==1?L.get(`${S.apiUrl}/leads/followingLeadsByEmpId?emp_id=${P}
      `).then(t=>{console.log("Follow Leads Data :",t),s(t.data),y(t.data)}).catch(t=>{console.log("Following Leads Data is not fetched.")}):D==2&&L.get(`${S.apiUrl}/leads/followingLeadsByEmpId?emp_id=${P}&reminderDate=${u}
      `).then(t=>{console.log("Follow Leads Data :",t),s(t.data),y(t.data)}).catch(t=>{console.log("Following Leads Data is not fetched.")})},[D,I]);const Z=t=>{const n=parseInt(t.target.value,10);n==1?(_(g.length),c(1)):(_(n),c(1))},ee=(b-1)*m,te=b*m,ae=r?r.slice(ee,te):[],se=()=>{const t=E!==""?E:"null",n=T!==""?T:"null",p=u!==""?u:"null",v=U!==""?k(U).format("YYYY-MM-DD 00:00:00"):"null",de=q!==""?k(q).format("YYYY-MM-DD 23:59:50"):"null";L.get(`${S.apiUrl}/leads/followingLeadsByEmpId`,{params:{emp_id:P,state:t,city:n,reminderDate:p,startDate:v,endDate:de}}).then(F=>{console.log("Follow Leads Data :",F),s(F.data),y(F.data)}).catch(F=>{console.log("Following Leads Data is not fetched.")})},le=()=>{R(""),N(""),$(""),A(""),C("")},ne=t=>{const n=g.find(p=>p.follow_id===t);n&&(H(n),W(!0))},re=t=>{const n=g.find(p=>p.follow_id===t);n&&(X(n),w(!0))};return e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("h1",{className:"text-center",children:"Followed Leads Index"}),e.jsxs(l,{container:!0,spacing:3,children:[D==3?e.jsxs(e.Fragment,{children:[e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,label:"Start Date",type:"date",InputLabelProps:{shrink:!0},onChange:t=>R(t.target.value)})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,label:"End Date",type:"date",InputLabelProps:{shrink:!0},onChange:t=>N(t.target.value)})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,label:"Reminder Date",name:"reminderDate",type:"date",onChange:t=>C(t.target.value),value:u,InputLabelProps:{shrink:!0}})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Select State",name:"state",onChange:t=>$(t.target.value),value:E,children:Y.map((t,n)=>e.jsx(x,{value:t,children:t},n))})}),e.jsx(l,{item:!0,xs:6,children:e.jsx(o,{fullWidth:!0,select:!0,label:"Select City",name:"city",onChange:t=>A(t.target.value),value:T,children:h.map((t,n)=>e.jsx(x,{value:t,children:t},n))})}),e.jsxs(l,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(f,{onClick:se,children:"Filter"}),e.jsx(f,{onClick:le,children:"Clear"})]})]}):e.jsx(e.Fragment,{}),e.jsx(l,{item:!0,xs:4,children:e.jsx(he,{data:g,setData:y})}),e.jsx(l,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(ie,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(ge,{value:D,onChange:(t,n)=>G(n),centered:!0,children:[e.jsx(M,{label:"All",value:1}),e.jsx(M,{label:"Today Remember Leads",value:2}),e.jsx(M,{label:"Apply filter",value:3})]})})}),e.jsx(l,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(ye,{children:e.jsxs(pe,{value:m,onChange:Z,children:[e.jsx(x,{value:5,children:"5 Per Page"}),e.jsx(x,{value:10,children:"10 Per Page"}),e.jsx(x,{value:15,children:"15 Per Page"}),e.jsx(x,{value:1,children:"All Per Page"})]})})})]}),e.jsx(me,{component:oe,style:{marginTop:"20px"},children:e.jsxs(ue,{children:[e.jsx(xe,{children:e.jsxs(B,{children:[e.jsx(a,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Employee Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Mobile"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Email"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Company"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(a,{style:{fontWeight:"bold"},children:"State"}),e.jsx(a,{style:{fontWeight:"bold"},children:"City"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Query"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Remember"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Reminder Date"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(je,{children:ae.map((t,n)=>e.jsxs(B,{children:[e.jsx(a,{children:n+1}),e.jsx(a,{children:t.emp_name}),e.jsx(a,{children:t.leads_name}),e.jsx(a,{children:t.leads_mobile}),e.jsx(a,{children:t.leads_email}),e.jsx(a,{children:t.leads_company}),e.jsx(a,{children:t.leads_address}),e.jsx(a,{children:t.leads_state}),e.jsx(a,{children:t.leads_city}),e.jsx(a,{children:t.product_name}),e.jsx(a,{children:t.leads_query}),e.jsx(a,{children:t.remember}),e.jsx(a,{children:k(t.reminder_date).format("YYYY-MM-DD")}),e.jsxs(a,{children:[e.jsx(f,{onClick:()=>re(t.follow_id),children:"Convert"}),e.jsx(f,{onClick:()=>ne(t.follow_id),children:"Edit"})]})]},n))})]})}),e.jsx(l,{container:!0,spacing:2,display:"flex",justifyContent:"center",className:"mt-4",children:e.jsx(ce,{spacing:2,children:e.jsx(be,{count:Math.ceil(r.length/m),page:b,onChange:(t,n)=>c(n),size:"small",style:{cursor:"pointer","&:hover":{backgroundColor:"transparent"}}})})}),e.jsxs(O,{open:I,onClose:()=>W(!1),maxWidth:"md",children:[e.jsx(V,{children:e.jsx(_e,{data:z,onClose:()=>W(!1)})}),e.jsx(Q,{children:e.jsx(f,{onClick:()=>W(!1),children:"Close"})})]}),e.jsxs(O,{open:J,onClose:()=>w(!1),maxWidth:"md",children:[e.jsx(V,{children:e.jsx(fe,{data:K,onClose:()=>w(!1)})}),e.jsx(Q,{children:e.jsx(f,{onClick:()=>w(!1),children:"Close"})})]})]})};export{Ee as default};
