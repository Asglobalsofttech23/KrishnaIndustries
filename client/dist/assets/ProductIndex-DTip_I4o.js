import{r as l,j as e,G as i,d as g,c as b,x as B,w as G}from"./index-BFgOO9FV.js";import{a as y}from"./axios-CMf68hJO.js";import{T as D,S as L}from"./TextField-uMyB6taY.js";import{S as M,T as H,a as z,b as J,c as U,d as h,e as K}from"./Search-BptgNfeq.js";import{F as Q}from"./OutlinedInput-CU74RVD_.js";import{M as k}from"./MenuItem-DdWCPvaA.js";import{D as T,a as I,b as N}from"./DialogContent-BR2G1wlf.js";import{D as X}from"./DialogTitle-Bwjr3vop.js";const Y=({onClose:a})=>{const[u,c]=l.useState({pro_name:"",pro_img:"",description:""}),[d,p]=l.useState({pro_name:"",pro_img:"",description:""}),P=(m,s)=>{let t="";const r=s&&typeof s=="string"?s.trim():s;switch(m){case"pro_name":r||(t="Product Name is required");break;case"pro_img":r||(t="Product Image is required");break;case"description":r||(t="Product description is required");break}return t},x=m=>{const{name:s,value:t,files:r}=m.target,n=P(s,t);p({...d,[s]:n}),s=="pro_img"?c({...u,[s]:r[0]}):c({...u,[s]:t})},_=m=>{m.preventDefault();let s={};if(Object.keys(u).forEach(t=>{const r=u[t],n=P(t,r);n&&(s[t]=n)}),Object.keys(s).length>0)p(s);else{const t=new FormData;t.append("pro_name",u.pro_name),t.append("pro_img",u.pro_img),y.post(`${b.apiUrl}/product/saveProduct`,t).then(r=>{a()}).catch(r=>{console.log("Product image is not added",r)})}};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Add Product"}),e.jsxs(i,{container:!0,spacing:3,className:"mt-3",children:[e.jsx(i,{item:!0,xs:6,children:e.jsx(D,{fullWidth:!0,name:"pro_name",label:"Product Name",onChange:x,value:u.pro_name,error:!!d.pro_name,helperText:d.pro_name})}),e.jsx(i,{item:!0,xs:6,children:e.jsx(D,{fullWidth:!0,name:"pro_img",type:"file",label:"Product Image",onChange:x,error:!!d.pro_img,helperText:d.pro_img,InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(D,{fullWidth:!0,name:"description",label:"Product description",onChange:x,error:!!d.description,helperText:d.description})}),e.jsx(i,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(g,{onClick:_,children:"Submit"})})]})]})},Z=({data:a,onClose:u})=>{console.log("Reciving update data :",a);const[c,d]=l.useState({pro_name:a?a.pro_name:"",pro_img:a?a.pro_img:"",description:a?a.description:""}),[p,P]=l.useState({pro_name:"",pro_img:"",description:""}),x=(s,t)=>{let r="";const n=t&&typeof t=="string"?t.trim():t;switch(s){case"pro_name":n||(r="Product Name is required");break;case"pro_img":n||(r="Product Image is required");break;case"description":n||(r="Product description is required");break}return r},_=s=>{const{name:t,value:r,files:n}=s.target,j=x(t,r);P({...p,[t]:j}),t==="pro_img"?(console.log("File object:",n[0]),d({...c,pro_img:n[0]})):d({...c,[t]:r})},m=s=>{s.preventDefault();let t={};if(Object.keys(c).forEach(r=>{const n=c[r],j=x(r,n);j&&(t[r]=j)}),Object.keys(t).length>0)P(t);else{const r=new FormData;r.append("pro_name",c.pro_name),r.append("pro_img",c.pro_img),r.append("description",c.description),console.log("Updatee Date :",r),y.put(`${b.apiUrl}/product/update/${a.pro_id}`,r).then(n=>{u()}).catch(n=>{console.log("Product image is not added",n)})}};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Add Product"}),e.jsxs(i,{container:!0,spacing:3,className:"mt-3",children:[e.jsx(i,{item:!0,xs:6,children:e.jsx(D,{fullWidth:!0,name:"pro_name",label:"Product Name",onChange:_,value:c.pro_name,error:!!p.pro_name,helperText:p.pro_name})}),e.jsx(i,{item:!0,xs:4,children:e.jsx(D,{fullWidth:!0,name:"pro_img",type:"file",label:"Product Image",onChange:_,error:!!p.pro_img,helperText:p.pro_img,InputLabelProps:{shrink:!0}})}),e.jsx(i,{item:!0,xs:2,children:e.jsx("img",{src:`http://localhost:3001/uploads/${a.pro_img}`,alt:a.pro_name,height:"50",width:"50"})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(D,{fullWidth:!0,name:"description",label:"Product description",onChange:_,error:!!p.description,helperText:p.description})}),e.jsx(i,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(g,{onClick:m,children:"Submit"})})]})]})},le=()=>{const[a,u]=l.useState([]),[c,d]=l.useState([]),[p,P]=l.useState(),[x,_]=l.useState(),[m,s]=l.useState(5),[t,r]=l.useState(1),[n,j]=l.useState(!1),[w,C]=l.useState(!1),[W,S]=l.useState(!1),v=B();l.useEffect(()=>{y.get(`${b.apiUrl}/product/getProductData`).then(o=>{u(o.data),d(o.data)}).catch(()=>{console.log("Product Data is not fetched.")})},[n,w,W]);const E=o=>{const f=a.find(R=>R.pro_id===o);f&&(P(f),C(!0))},$=o=>{o&&(_(o),S(!0))},F=()=>{console.log("Dlt Data :",x),x&&y.delete(`${b.apiUrl}/product/delete/${x}`).then(o=>{S(!1)}).catch(o=>{console.log("Product Data is not deleted.",o)})},O=o=>{const f=parseInt(o.target.value,10);f==1?(s(a.length),r(1)):(s(f),r(1))},A=(t-1)*m,q=t*m,V=c.slice(A,q);return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Product Index"}),e.jsxs(i,{container:!0,spacing:3,children:[e.jsx(i,{item:!0,xs:4,children:e.jsx(g,{onClick:()=>j(!0),children:"Add New"})}),e.jsx(i,{item:!0,xs:4,children:e.jsx(M,{data:a,setData:d})}),e.jsx(i,{item:!0,xs:4,children:e.jsx(Q,{children:e.jsxs(L,{value:m,onChange:O,children:[e.jsx(k,{value:5,children:"5 Per Page"}),e.jsx(k,{value:10,children:"10 Per Page"}),e.jsx(k,{value:15,children:"15 Per Page"}),e.jsx(k,{value:1,children:"All Per Page"})]})})})]}),e.jsx(H,{component:G,className:"mt-5",children:e.jsxs(z,{children:[e.jsx(J,{children:e.jsxs(U,{children:[e.jsx(h,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(h,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(h,{style:{fontWeight:"bold"},children:"Product Image"}),e.jsx(h,{style:{fontWeight:"bold"},children:"Product description"}),e.jsx(h,{style:{fontWeight:"bold"},children:"Specification"}),e.jsx(h,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(K,{children:V.map((o,f)=>e.jsxs(U,{children:[e.jsx(h,{children:f+1}),e.jsx(h,{children:o.pro_name}),e.jsx(h,{children:e.jsx("img",{src:`${b.apiUrl}/uploads/${o.pro_img}`,alt:o.pro_name,height:"100",width:"100"})}),e.jsx(h,{children:o.description}),e.jsx(h,{children:e.jsx(g,{onClick:()=>v(`/specIndex/${o.pro_id}`),children:" Specification index"})}),e.jsxs(h,{children:[e.jsx(g,{onClick:()=>E(o.pro_id),children:"Edit"}),e.jsx(g,{onClick:()=>$(o.pro_id),children:"Delete"})]})]},f))})]})}),e.jsxs(T,{open:n,onClose:()=>j(!1),maxWidth:"md",children:[e.jsx(I,{children:e.jsx(Y,{onClose:()=>j(!1)})}),e.jsx(N,{children:e.jsx(g,{onClick:()=>j(!1),children:"Close"})})]}),e.jsxs(T,{open:w,onClose:()=>C(!1),maxWidth:"md",children:[e.jsx(I,{children:e.jsx(Z,{data:p,onClose:()=>C(!1)})}),e.jsx(N,{children:e.jsx(g,{onClick:()=>C(!1),children:"Close"})})]}),e.jsxs(T,{open:W,onClose:()=>S(!1),maxWidth:"md",children:[e.jsx(X,{children:"Delete"}),e.jsx(I,{children:e.jsx("p",{children:"Are you sure do you want delete this product ?"})}),e.jsxs(N,{children:[e.jsx(g,{style:{backgroundColor:"red",color:"white"},onClick:F,children:"Delete"}),e.jsx(g,{style:{backgroundColor:"green",color:"white"},onClick:()=>S(!1),children:"Close"})]})]})]})};export{le as default};
