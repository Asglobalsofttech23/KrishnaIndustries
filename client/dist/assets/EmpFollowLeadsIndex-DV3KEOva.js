import{r as s,c as x,j as e,G as n,d as _,B as Z,m as ee,S as te}from"./index-CTTX9ijT.js";import{a as j}from"./axios-C6NQisi-.js";import{h as p}from"./moment-G82_0lEo.js";import{M as o,S as ae,T as le,a as se,b as ne,c as R,d as a,e as re}from"./Search-CCLIb58Y.js";import{T as d,S as oe}from"./TextField-Dktkde7T.js";import{T as de,a as w}from"./Tabs-C19gcznY.js";import{F as ie}from"./OutlinedInput-C8Fn8aqk.js";import{P as ce}from"./Pagination-D93ObAOZ.js";const ye=()=>{const[Y,g]=s.useState([]),[f,h]=s.useState([]),[m,T]=s.useState(5),[y,D]=s.useState(1),[$,B]=s.useState([]),[U,q]=s.useState([]),[G,O]=s.useState([]),[u,E]=s.useState(p().format("YYYY-MM-DD")),[b,M]=s.useState(),[S,k]=s.useState(),[C,A]=s.useState(""),[P,I]=s.useState(""),[v,N]=s.useState(""),[i,V]=s.useState(1);s.useEffect(()=>{j.get(`${x.apiUrl}/leads/empFollowLeadsForAdmin`).then(t=>{const l=Array.from(new Set(t.data.map(r=>r.emp_id))).map(r=>t.data.find(W=>W.emp_id===r));B(l);const F=new Set(t.data.map(r=>r.leads_state));q([...F]);const L=new Set(t.data.map(r=>r.leads_city));O([...L])}).catch(t=>{console.log("Leads data is not fetched.",t)})},[]),s.useEffect(()=>{i==1?j.get(`${x.apiUrl}/leads/empFollowLeadsForAdmin
        `).then(t=>{console.log("Follow Leads Data :",t),g(t.data),h(t.data)}).catch(t=>{console.log("Following Leads Data is not fetched.")}):i==2&&j.get(`${x.apiUrl}/leads/empFollowLeadsForAdmin?reminderDate=${u}
        `).then(t=>{console.log("Follow Leads Data :",t),g(t.data),h(t.data)}).catch(t=>{console.log("Following Leads Data is not fetched.")})},[i]);const z=()=>{const t=C!==""?C:"null",l=P!==""?P:"null",F=v!==""?v:"null",L=u!==""?u:"null",r=b!==""?p(b).format("YYYY-MM-DD 00:00:00"):"null",W=S!==""?p(S).format("YYYY-MM-DD 23:59:50"):"null";j.get(`${x.apiUrl}/leads/empFollowLeadsForAdmin`,{params:{state:t,city:l,emp_id:F,reminderDate:L,startDate:r,endDate:W}}).then(c=>{console.log("Follow Leads Data:",c),g(c.data),h(c.data),console.log("Data:",c.data)}).catch(c=>{console.log("Following Leads Data is not fetched.")})},H=()=>{M(""),k(""),A(""),I(""),N(""),E("")},Q=t=>{const l=parseInt(t.target.value,10);l==1?(T(Y.length),D(1)):(T(l),D(1))},J=(y-1)*m,K=y*m,X=f?f.slice(J,K):[];return e.jsxs("div",{style:{padding:"10px"},children:[e.jsx("h1",{className:"text-center",children:"Followed Leads Index"}),e.jsxs(n,{container:!0,spacing:3,children:[i==3?e.jsxs(e.Fragment,{children:[e.jsx(n,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"Start Date",type:"date",value:b,InputLabelProps:{shrink:!0},onChange:t=>M(t.target.value)})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"End Date",type:"date",value:S,InputLabelProps:{shrink:!0},onChange:t=>k(t.target.value)})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Employee Name",name:"emp_name",onChange:t=>N(t.target.value),value:v,children:$.map((t,l)=>e.jsx(o,{value:t.emp_id,children:t.emp_name},l))})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,label:"Reminder Date",name:"reminderDate",type:"date",onChange:t=>E(t.target.value),value:u,InputLabelProps:{shrink:!0}})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select State",name:"state",onChange:t=>A(t.target.value),value:C,children:U.map((t,l)=>e.jsx(o,{value:t,children:t},l))})}),e.jsx(n,{item:!0,xs:6,children:e.jsx(d,{fullWidth:!0,select:!0,label:"Select City",name:"city",onChange:t=>I(t.target.value),value:P,children:G.map((t,l)=>e.jsx(o,{value:t,children:t},l))})}),e.jsxs(n,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(_,{onClick:z,children:"Filter"}),e.jsx(_,{onClick:H,children:"Clear"})]})]}):e.jsx(e.Fragment,{}),e.jsx(n,{item:!0,xs:4,children:e.jsx(ae,{data:Y,setData:h})}),e.jsx(n,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(Z,{sx:{width:"100%",bgcolor:"background.paper"},children:e.jsxs(de,{value:i,onChange:(t,l)=>V(l),centered:!0,children:[e.jsx(w,{label:"All",value:1}),e.jsx(w,{label:"Today Remember Leads",value:2}),e.jsx(w,{label:"Apply filter",value:3})]})})}),e.jsx(n,{item:!0,xs:4,display:"flex",justifyContent:"end",children:e.jsx(ie,{children:e.jsxs(oe,{value:m,onChange:Q,children:[e.jsx(o,{value:5,children:"5 Per Page"}),e.jsx(o,{value:10,children:"10 Per Page"}),e.jsx(o,{value:15,children:"15 Per Page"}),e.jsx(o,{value:1,children:"All Per Page"})]})})})]}),e.jsx(le,{component:ee,style:{marginTop:"20px"},children:e.jsxs(se,{children:[e.jsx(ne,{children:e.jsxs(R,{style:{fontWeight:"bold",backgroundColor:"#FFF9C4"},children:[e.jsx(a,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Employee Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Mobile"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Email"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Leads Company"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(a,{style:{fontWeight:"bold"},children:"State"}),e.jsx(a,{style:{fontWeight:"bold"},children:"City"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Query"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Remember"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Reminder Date"}),e.jsx(a,{style:{fontWeight:"bold"},children:"Action"})]})}),e.jsx(re,{children:X.map((t,l)=>e.jsxs(R,{children:[e.jsx(a,{children:l+1}),e.jsx(a,{children:t.emp_name}),e.jsx(a,{children:t.leads_name}),e.jsx(a,{children:t.leads_mobile}),e.jsx(a,{children:t.leads_email}),e.jsx(a,{children:t.leads_company}),e.jsx(a,{children:t.leads_address}),e.jsx(a,{children:t.leads_state}),e.jsx(a,{children:t.leads_city}),e.jsx(a,{children:t.product_name}),e.jsx(a,{children:t.leads_query}),e.jsx(a,{children:t.remember}),e.jsx(a,{children:p(t.reminder_date).format("YYYY-MM-DD")}),e.jsx(a,{children:e.jsx(_,{children:"Edit"})})]},l))})]})}),e.jsx(n,{container:!0,spacing:2,display:"flex",justifyContent:"center",className:"mt-4",children:e.jsx(te,{spacing:2,children:e.jsx(ce,{count:Math.ceil(f.length/m),page:y,onChange:(t,l)=>D(l),size:"small",style:{cursor:"pointer","&:hover":{backgroundColor:"transparent"}}})})})]})};export{ye as default};
