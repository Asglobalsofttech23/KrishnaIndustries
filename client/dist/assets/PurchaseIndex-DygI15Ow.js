import{r as u,j as e,G as a,d as p,c as q,T as b,m as ee,S as te}from"./index-CTTX9ijT.js";import{a as I}from"./axios-C6NQisi-.js";import{T as j,S as se}from"./TextField-Dktkde7T.js";import{T as U,a as O,b as F,c as R,d as n,e as G,S as re,M as W}from"./Search-CCLIb58Y.js";import{l as ie}from"./logo (1)-D-rUVK23.js";import{h as w}from"./moment-G82_0lEo.js";/* empty css                    */import ne from"./UploadExell-CFNL1ls6.js";import{F as ae}from"./OutlinedInput-C8Fn8aqk.js";import{P as le}from"./Pagination-D93ObAOZ.js";import{D as _,a as k,b as v}from"./DialogContent-BtWOILlZ.js";const oe=({onClose:s})=>{const[c,h]=u.useState({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),[o,i]=u.useState({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),C=(y,d)=>{let t="";const r=d&&typeof d=="string"?d.trim():d;switch(y){case"pro_name":r||(t="Product Name is Required");break;case"specification":r||(t="Specification is Required");break;case"purch_address":r||(t="Address is Required");break;case"quantity":r||(t="Quantity is Required");break;case"price":r||(t="Price is Required");break;case"total":r||(t="Total is Required");break;case"gst":r||(t="GST is Required");break}return t},m=y=>{const{name:d,value:t}=y.target,r=C(d,t);h({...c,[d]:t}),i({...o,[d]:r})},f=y=>{y.preventDefault();let d={};if(Object.keys(c).forEach(t=>{const r=c[t],x=C(t,r);x&&(d[t]=x)}),Object.keys(d).length>0){i(d);return}I.post(`${q.apiUrl}/purchase/savePurchase`,c).then(t=>{s()}).catch(t=>{console.log("Purchase Data is not added.",t)})},P=()=>{h({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),i({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Add Purchase"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"pro_name",label:"Product Name",value:c.pro_name,onChange:m,error:!!o.pro_name,helperText:o.pro_name})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"specification",label:"Specification",value:c.specification,onChange:m,error:!!o.specification,helperText:o.specification})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"purch_address",label:"Address",value:c.purch_address,onChange:m,error:!!o.purch_address,helperText:o.purch_address})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"quantity",label:"Quantity",type:"number",value:c.quantity,onChange:m,error:!!o.quantity,helperText:o.quantity})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"price",label:"Price",type:"number",value:c.price,onChange:m,error:!!o.price,helperText:o.price})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"total",label:"Total",type:"number",value:c.total,onChange:m,error:!!o.total,helperText:o.total})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"gst",label:"GST",type:"number",value:c.gst,onChange:m,error:!!o.gst,helperText:o.gst})}),e.jsxs(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(p,{onClick:f,children:"Submit"}),e.jsx(p,{onClick:P,style:{marginLeft:"20px"},children:"Clear"})]})]})]})},ce=({data:s,onClose:c})=>{const[h,o]=u.useState({pro_name:s?s.pro_name:"",specification:s?s.specification:"",purch_address:s?s.purch_address:"",quantity:s?s.quantity:"",price:s?s.price:"",total:s?s.total:"",gst:s?s.gst:""}),[i,C]=u.useState({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),m=(d,t)=>{let r="";const x=t&&typeof t=="string"?t.trim():t;switch(d){case"pro_name":x||(r="Product Name is Required");break;case"specification":x||(r="Specification is Required");break;case"purch_address":x||(r="Address is Required");break;case"quantity":x||(r="Quantity is Required");break;case"price":x||(r="Price is Required");break;case"total":x||(r="Total is Required");break;case"gst":x||(r="GST is Required");break}return r},f=d=>{const{name:t,value:r}=d.target,x=m(t,r);o({...h,[t]:r}),C({...i,[t]:x})},P=d=>{d.preventDefault();let t={};if(Object.keys(h).forEach(r=>{const x=h[r],D=m(r,x);D&&(t[r]=D)}),Object.keys(t).length>0){C(t);return}I.put(`${q.apiUrl}/purchase/update/${s.purch_id}`,h).then(r=>{c()}).catch(r=>{console.log("Purchase Data is not added.",r)})},y=()=>{o({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""}),C({pro_name:"",specification:"",purch_address:"",quantity:"",price:"",total:"",gst:""})};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"text-center",children:"Add Purchase"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"pro_name",label:"Product Name",value:h.pro_name,onChange:f,error:!!i.pro_name,helperText:i.pro_name})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"specification",label:"Specification",value:h.specification,onChange:f,error:!!i.specification,helperText:i.specification})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"purch_address",label:"Address",value:h.purch_address,onChange:f,error:!!i.purch_address,helperText:i.purch_address})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"quantity",label:"Quantity",type:"number",value:h.quantity,onChange:f,error:!!i.quantity,helperText:i.quantity})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"price",label:"Price",type:"number",value:h.price,onChange:f,error:!!i.price,helperText:i.price})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"total",label:"Total",type:"number",value:h.total,onChange:f,error:!!i.total,helperText:i.total})}),e.jsx(a,{item:!0,xs:6,children:e.jsx(j,{fullWidth:!0,name:"gst",label:"GST",type:"number",value:h.gst,onChange:f,error:!!i.gst,helperText:i.gst})}),e.jsxs(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:[e.jsx(p,{onClick:P,children:"Update"}),e.jsx(p,{onClick:y,style:{marginLeft:"20px"},children:"Clear"})]})]})]})},de=({data:s,dueDate:c})=>e.jsxs("div",{style:{fontFamily:"Arial, sans-serif",fontSize:"12px"},children:[e.jsx(b,{variant:"h4",align:"center",style:{marginBottom:"20px"},children:"Invoice"}),e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,display:"flex",justifyContent:"end",children:e.jsx("img",{src:ie,alt:"Company Logo",width:"100",height:"100"})}),e.jsxs(a,{item:!0,xs:4,children:[e.jsx(b,{variant:"h6",style:{fontWeight:"bold"},children:"From"}),e.jsx(b,{children:s.purch_address})]}),e.jsxs(a,{item:!0,xs:4,children:[e.jsx(b,{variant:"h6",style:{fontWeight:"bold"},children:"To"}),e.jsx(b,{children:"Krishna Industries"}),e.jsx(b,{children:"Peelamedu, Singanallur"}),e.jsx(b,{children:"Coimbatore, 627757"})]}),e.jsxs(a,{item:!0,xs:4,children:[e.jsxs(b,{variant:"h6",style:{display:"inline-block",marginRight:"20px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Invoice Date    : "})," ",w().format("YYYY-MM-DD")]}),e.jsxs(b,{variant:"h6",style:{display:"inline-block",marginTop:"2px"},children:[e.jsx("span",{style:{fontWeight:"bold"},children:"Due Date           :"})," ",w(c).format("YYYY-MM-DD")]})]})]}),e.jsx(U,{style:{marginTop:"20px"},children:e.jsxs(O,{children:[e.jsx(F,{children:e.jsxs(R,{children:[e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"S.No"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Product Name"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Description"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Quantity"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Price"}),e.jsx(n,{style:{border:"1px solid #ddd",fontWeight:"bold"},children:"Total"})]})}),e.jsx(G,{children:e.jsxs(R,{children:[e.jsx(n,{style:{border:"1px solid #ddd"},children:"01"}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.pro_name}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.specification}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.quantity}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.price}),e.jsx(n,{style:{border:"1px solid #ddd"},children:s.total})]})})]})}),e.jsxs("div",{style:{marginTop:"20px",borderTop:"1px solid #ddd",textAlign:"right"},children:[e.jsxs(b,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"Price"})," : ",s.price]}),e.jsxs(b,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"GST 18%"})," : ",s.gst]}),e.jsxs(b,{className:"mt-2",variant:"h6",children:[" ",e.jsx("span",{style:{fontWeight:"bold"},children:"Total"})," : ",s.total]})]})]}),he=({data:s})=>{const[c,h]=u.useState(null),o=()=>{const i=document.getElementById("printButton");i&&(i.style.display="none"),window.print(),i&&(i.style.display="block")};return e.jsx(e.Fragment,{children:c?e.jsxs(e.Fragment,{children:[e.jsx(de,{data:s,dueDate:c}),e.jsx(p,{id:"printButton",onClick:o,style:{display:"block",margin:"20px auto"},children:"Print"})]}):e.jsx(j,{label:"Due Date",type:"date",InputLabelProps:{shrink:!0},onChange:i=>h(i.target.value),value:c})})},De=()=>{const[s,c]=u.useState([]),[h,o]=u.useState([]),[i,C]=u.useState(5),[m,f]=u.useState(1),[P,y]=u.useState(!1),[d,t]=u.useState(!1),[r,x]=u.useState(),[D,T]=u.useState(!1),[A,Y]=u.useState(),[B,N]=u.useState(!1),[M,Q]=u.useState([]),[$,S]=u.useState(!1);u.useEffect(()=>{I.get(`${q.apiUrl}/purchase/getPurchase`).then(l=>{c(l.data),o(l.data)}).catch(l=>{console.log("Purchase Data could not be fetched.",l)})},[P,d,D]);const L=l=>{const g=parseInt(l.target.value,10);g==1?(C(s.length),f(1)):(C(g),f(1))},V=(m-1)*i,z=m*i,H=h.slice(V,z),K=l=>{const g=s.find(E=>E.purch_id===l);g&&(x(g),t(!0))},J=l=>{const g=s.find(E=>E.purch_id===l);g&&(Q(g),N(!0))},X=l=>{l&&(Y(l),T(!0))},Z=()=>{A&&I.delete(`${q.apiUrl}/purchase/delete/${A}`).then(l=>{T(!1)}).catch(l=>{console.log("Purchase Data is not deleted.",l)})};return e.jsxs("div",{children:[e.jsx("h1",{className:"text-center",children:"Purchase Index"}),e.jsxs(a,{container:!0,spacing:3,className:"mt-3",children:[e.jsx(a,{item:!0,xs:3,display:"flex",justifyContent:"center",children:e.jsx(p,{onClick:()=>y(!0),children:"Add New"})}),e.jsxs(a,{item:!0,xs:3,display:"flex",justifyContent:"center",children:[e.jsx(p,{onClick:()=>S(!0),children:"Upload Excel"})," "]}),e.jsx(a,{item:!0,xs:3,display:"flex",justifyContent:"center",children:e.jsx(re,{data:s,setData:o})}),e.jsx(a,{item:!0,xs:3,display:"flex",justifyContent:"center",children:e.jsx(ae,{children:e.jsxs(se,{value:i,onChange:L,children:[e.jsx(W,{value:5,children:"5 Per Page"}),e.jsx(W,{value:10,children:"10 Per Page"}),e.jsx(W,{value:15,children:"15 Per Page"}),e.jsx(W,{value:1,children:"All Per Page"})]})})})]}),e.jsx(U,{component:ee,className:"mt-3",children:e.jsxs(O,{children:[e.jsxs(F,{children:[e.jsx(n,{style:{fontWeight:"bold"},children:"S.No"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Product Name"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Specification"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Address"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Quantity"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Price"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Total"}),e.jsx(n,{style:{fontWeight:"bold"},children:"GST"}),e.jsx(n,{style:{fontWeight:"bold"},children:"Action"})]}),e.jsx(G,{children:H.map((l,g)=>e.jsxs(R,{children:[e.jsx(n,{children:g+1}),e.jsx(n,{children:l.pro_name}),e.jsx(n,{children:l.specification}),e.jsx(n,{children:l.purch_address}),e.jsx(n,{children:l.quantity}),e.jsx(n,{children:l.price}),e.jsx(n,{children:l.total}),e.jsx(n,{children:l.gst}),e.jsxs(n,{children:[e.jsx(p,{onClick:()=>J(l.purch_id),children:"Invoice"}),e.jsx(p,{onClick:()=>K(l.purch_id),children:"Edit"}),e.jsx(p,{onClick:()=>X(l.purch_id),children:"Delete"})]})]},g))})]})}),e.jsx(a,{container:!0,spacing:2,children:e.jsx(a,{item:!0,xs:12,display:"flex",justifyContent:"center",children:e.jsx(te,{spacing:2,children:e.jsx(le,{count:Math.ceil(s.length/i),page:m,onChange:(l,g)=>f(g),size:"small"})})})}),e.jsxs(_,{open:P,onClose:()=>y(!1),maxWidth:"md",children:[e.jsx(k,{children:e.jsx(oe,{onClose:()=>y(!1)})}),e.jsx(v,{children:e.jsx(p,{onClick:()=>y(!1),children:"Close"})})]}),e.jsxs(_,{open:d,onClose:()=>t(!1),maxWidth:"md",children:[e.jsx(k,{children:e.jsx(ce,{data:r,onClose:()=>t(!1)})}),e.jsx(v,{children:e.jsx(p,{onClick:()=>t(!1),children:"Close"})})]}),e.jsxs(_,{open:B,onClose:()=>N(!1),maxWidth:"md",children:[e.jsx(k,{children:e.jsx(he,{data:M,onClose:()=>N(!1)})}),e.jsx(v,{className:"mt-5"})]}),e.jsxs(_,{open:D,onClose:()=>T(!1),children:[e.jsx(k,{children:e.jsx("p",{children:"Are you sure do you want to delete this purchase data ?"})}),e.jsxs(v,{children:[e.jsx(p,{onClick:Z,style:{backgroundColor:"red",color:"whitesmoke"},children:"Delete"}),e.jsx(p,{onClick:()=>T(!1),style:{backgroundColor:"green",color:"whitesmoke"},children:"Cancel"})]})]}),e.jsxs(_,{open:$,onClose:()=>S(!1),maxWidth:"md",children:[" ",e.jsx(k,{children:e.jsx(ne,{onClose:()=>S(!1)})}),e.jsx(v,{children:e.jsx(p,{onClick:()=>S(!1),children:"Close"})})]})]})};export{De as default};
